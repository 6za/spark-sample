version: '3.7'
services:   
  s3-host:
    image: minio/minio:RELEASE.2023-10-24T04-42-36Z
    environment:
      MINIO_ROOT_USER: user
      MINIO_ROOT_PASSWORD: password
    volumes:
      - ./persistence/s3:/data/
    logging:
      options:
        max-size: 10m
        max-file: "3"
    ports:
      - "9000:9000"
      - "9001:9001"
    command: server --console-address ":9001" /data

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 15s
      timeout: 10s
      retries: 10      

  
  # process-load:
  #   image: spark-postgres-test
  #   environment:            
  #     - CLASSNAME=Main
  #   links:
  #     - "db-postgres:db-postgres"       
  #   #volumes:
  #   #  - ./persistence/cassandra/out:/out
  #   depends_on:
  #       s3-host:
  #           condition: service_healthy        